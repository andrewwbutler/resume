~< extends "section.tex" >~

~< macro listitem(item) >~
  ~< if item.description is defined >~
    \cvitem{<< item.name >>}{<< item.description >>}
  ~< elif item.notes is defined >~
    \begin{itemize}
      \item{<< item.name >>}
      \begin{itemize}
      ~< for note in item.notes >~
        \item{<< note >>}
      ~< endfor >~
      \end{itemize}
    \end{itemize}
  ~< elif item.date is defined >~
    \begin{samepage}
      \vspace{-0.5em}
      \begin{itemize}
        \setlength{\parskip}{0pt} 
        \setlength{\itemsep}{0pt plus 1pt}
        \item{ << item.name >> \hfill{ \emph{ << item.date >> }}}
      \end{itemize}
      \vspace{-1.25em}
    \end{samepage}
  ~< else >~
    \cvlistitem{<< item >>}
  ~< endif >~
~< endmacro >~

~< block body >~
  ~< if subsections is defined >~
    ~< for subs in subsections >~
      \textbf{<< subs.name >>}
        \vspace{0.25em}
        ~< for item in subs.subitems >~
          << listitem(item) >>
        ~< endfor >~
        \vspace{1em}
    ~< endfor >~
  ~< else >~
    ~< for item in items >~
      << listitem(item) >>
    ~< endfor >~
  ~< endif >~
~< endblock body >~
